{{#unless isHidden}}
  {{plugin-outlet name='category-list-above-each-category' connectorTagName='' tagName='' args=(hash category=category)}}
  <div
    data-category-id={{category.id}}
    data-notification-level={{category.notificationLevelString}}
    style='border-color: {{category.color}}'
    class='{{if category.description_excerpt "has-description" "no-description"}} {{if category.uploaded_logo.url "has-logo" "no-logo"}} category category-box category-box-{{category.slug}}'
  >
    <div class='category-box-inner {{if isMuted "muted"}} {{if noCategoryStyle "no-category-style"}}' style={{unless noCategoryStyle (border-color category.color)}}>

      <div class='category-logo'>
        <div class='logo aspect-image' style='--aspect-ratio: 1;'>
          <img src='{{category.uploaded_logo.url}}' width='{{category.uploaded_logo.width}}' height='{{category.uploaded_logo.height}}' alt='' />
        </div>
      </div>

      <div class='category-details'>
        <div class='category-box-heading'>
          <a class='parent-box-link' href='{{category.url}}'>
            <h3>
              <div class='category-text-title'>
                {{category-title-before category=category}}
                {{#if category.read_restricted}}
                  {{d-icon lockIcon}}
                {{/if}}
                <span class='category-name'>{{dir-span category.name}}</span>
              </div>
            </h3>
            {{#if category.description_excerpt}}
              <div class='category-description'>
                {{dir-span category.description_excerpt}}
              </div>
            {{/if}}
            {{#if category.isGrandParent}}
              {{#each category.subcategories as |subcategory|}}
                {{sub-category-row category=subcategory listType=listType}}
              {{/each}}
            {{else if category.subcategories}}
              <div class='subcategories'>
                {{#each category.subcategories as |subcategory|}}
                  {{sub-category-item category=subcategory listType=listType}}
                {{/each}}
              </div>
            {{/if}}
          </a>
        </div>
        <div class='category-activities'>
          <div class='category-activity'>
            <h3>{{category.topic_count}}</h3>
            <span>TOPICS</span>
          </div>
          <div class='category-activity'>
            <h3>{{category.post_count}}</h3>
            <span>POSTS</span>
          </div>
        </div>
      </div>
    </div>
  </div>
{{/unless}}
